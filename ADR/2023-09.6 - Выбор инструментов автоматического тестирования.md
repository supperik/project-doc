**Дата:** 24 декабря 2025 г.  
**Статус:** Принято

# Контекст

Для платформы трейдинга необходимо обеспечить качество при изменениях в критичных модулях (ордера, исполнение, портфель), а также проверять realtime-сценарии (подписки на котировки) и интеграции (БД, брокеры, брокер сообщений).

Нужны инструменты для:

- unit-тестов,
- интеграционных тестов (БД/очереди),
- тестирования API,
- E2E тестирования UI,
- нагрузочного тестирования (realtime/API).

# Рассмотренные варианты

## Backend (Go)
- Go testing package — стандартная библиотека тестирования.
- Testify — ассёрты/моки.
- GoMock — генерация моков.
- Testcontainers-go — интеграционные тесты с реальными контейнерами Postgres/Redis/broker.
- Postman/Newman — API тесты.
- k6 / JMeter — нагрузочное тестирование.

## Frontend (React)
- Jest — unit-тесты.
- React Testing Library — поведенческие тесты компонентов.
- Cypress — E2E.
- Playwright — E2E (быстрее, стабильнее в CI, хороший parallel).

# Решение

### Backend (Go)
- **Go testing package**
- **Testify**
- **GoMock** (для мокирования внешних клиентов/интеграций)
- **Testcontainers-go** (интеграционные тесты с Postgres/Redis/broker)
- **Postman/Newman** (регрессия REST API)
- **k6** (нагрузочные тесты API и WebSocket)

### Frontend (React)
- **Jest**
- **React Testing Library**
- **Playwright** (E2E)

# Обоснование

- Покрываем критичное ядро быстрыми unit-тестами (go test + testify).
- Интеграции проверяем максимально приближенно к продакшену (testcontainers).
- API регрессия воспроизводима в CI через Newman.
- E2E на Playwright стабильнее в CI и подходит для сценариев «котировки → выставить ордер → увидеть сделку».
- k6 даёт быстрые сценарии для проверки задержек и деградации под нагрузкой.

# Последствия

- Тестирование становится обязательным этапом CI (unit + интеграция + smoke E2E).
- Требуются тестовые стенды/контейнеры для брокера сообщений и БД.
- Для realtime-сценариев вводятся тестовые сценарии WebSocket/stream.
